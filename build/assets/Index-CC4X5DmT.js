import{k as S,o as V,f as A,b as v,e as U,n as H,p as x,D as W,E as Z,A as M,q as $,G as J,H as Q,I as X,J as P,T as Y,K as D,a as p,u as g,w as E,F,Z as ee,d as O,g as ne,i as te,l as oe,t as z,m as ie,c as re,L}from"./app-ChM9_gVR.js";import{_ as ae}from"./AuthenticatedLayout-BupWwsRY.js";import{_ as le}from"./InputError-BUYU4kJ_.js";import{P as se}from"./PrimaryButton-Bfa72YcF.js";import{W as ue}from"./WriteUp-BmIq-eZO.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-X2AUPJUz.js";import"./DropdownLink-D2ebbFhW.js";import"./relativeTime-DLeb5gBC.js";const ce={name:"DropZone",setup(){const e=S(!1);return{active:e,toggleActive:()=>{e.value=!e.value}}}};function fe(e,t,n,o,i,r){return V(),A("div",{onDragenter:t[0]||(t[0]=U((...s)=>o.toggleActive&&o.toggleActive(...s),["prevent"])),onDragleave:t[1]||(t[1]=(...s)=>o.toggleActive&&o.toggleActive(...s)),onDragover:t[2]||(t[2]=U(()=>{},["prevent"])),onDrop:t[3]||(t[3]=(...s)=>o.toggleActive&&o.toggleActive(...s)),class:H(["dropzone",{"active-dropzone":o.active}])},t[4]||(t[4]=[v("span",null,"Drag or drop file...",-1),v("span",null,"OR",-1),v("label",{for:"dropzoneFile"},"Select file",-1),v("input",{type:"file",id:"dropzoneFile",class:"dropzoneFile"},null,-1)]),34)}const ve=de(ce,[["render",fe],["__scopeId","data-v-3cd50303"]]);var me=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ge=function(e){return me.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},pe=function(e,t,n){Object.keys(t).filter(ge).forEach(function(o){var i=t[o];typeof i=="function"&&(o==="onInit"?i(e,n):n.on(o.substring(2),function(r){return i(r,n)}))})},ye=function(e,t,n,o){var i=e.modelEvents?e.modelEvents:null,r=Array.isArray(i)?i.join(" "):i;x(o,function(s,d){n&&typeof s=="string"&&s!==d&&s!==n.getContent({format:e.outputFormat})&&n.setContent(s)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},Ce=function(e,t,n,o,i,r){o.setContent(r()),n.attrs["onUpdate:modelValue"]&&ye(t,n,o,i),pe(e,n.attrs,o)},j=0,T=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return j++,e+"_"+n+j+String(t)},be=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},K=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},we=function(e,t){return K(e).concat(K(t))},Se=function(e){return e==null},N=function(){return{listeners:[],scriptId:T("tiny-script"),scriptLoaded:!1}},he=function(){var e=N(),t=function(i,r,s,d){var a=r.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=i,a.src=s;var b=function(){a.removeEventListener("load",b),d()};a.addEventListener("load",b),r.head&&r.head.appendChild(a)},n=function(i,r,s){e.scriptLoaded?s():(e.listeners.push(s),i.getElementById(e.scriptId)||t(e.scriptId,i,r,function(){e.listeners.forEach(function(d){return d()}),e.scriptLoaded=!0}))},o=function(){e=N()};return{load:n,reinitialize:o}},_e=he(),Ve=function(){return typeof window<"u"?window:global},w=function(){var e=Ve();return e&&e.tinymce?e.tinymce:null},De={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},y=function(){return y=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},y.apply(this,arguments)},Ee=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},Ae=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},k={selector:void 0,target:void 0},R=W({props:De,setup:function(e,t){var n=e.init?y(y({},e.init),k):y({},k),o=Z(e),i=o.disabled,r=o.modelValue,s=o.tagName,d=S(null),a=null,b=e.id||T("tiny-vue"),m=e.init&&e.init.inline||e.inline,l=!!t.attrs["onUpdate:modelValue"],C=!0,B=e.initialValue?e.initialValue:"",h="",I=function(c){return l?function(){return r!=null&&r.value?r.value:""}:function(){return c?B:h}},u=function(){var c=I(C),f=y(y({},n),{readonly:e.disabled,target:d.value,plugins:we(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,license_key:e.licenseKey,setup:function(_){a=_,_.on("init",function(q){return Ce(q,e,t,_,r,c)}),typeof n.setup=="function"&&n.setup(_)}});be(d.value)&&(d.value.style.visibility=""),w().init(f),C=!1};x(i,function(c){var f;a!==null&&(typeof((f=a.mode)===null||f===void 0?void 0:f.set)=="function"?a.mode.set(c?"readonly":"design"):a.setMode(c?"readonly":"design"))}),x(s,function(c){var f;l||(h=a.getContent()),(f=w())===null||f===void 0||f.remove(a),M(function(){return u()})}),$(function(){if(w()!==null)u();else if(d.value&&d.value.ownerDocument){var c=e.cloudChannel?e.cloudChannel:"7",f=e.apiKey?e.apiKey:"no-api-key",_=Se(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(f,"/tinymce/").concat(c,"/tinymce.min.js"):e.tinymceScriptSrc;_e.load(d.value.ownerDocument,_,u)}}),J(function(){w()!==null&&w().remove(a)}),m||(Q(function(){C||u()}),X(function(){var c;l||(h=a.getContent()),(c=w())===null||c===void 0||c.remove(a)}));var G=function(c){var f;h=a.getContent(),(f=w())===null||f===void 0||f.remove(a),n=y(y(y({},n),c),k),M(function(){return u()})};return t.expose({rerender:G,getEditor:function(){return a}}),function(){return m?Ee(P,b,d,e.tagName):Ae(P,b,d)}}});const Ue={class:"max-w-2xl mx-auto p-4 sm:p-6 lg:p-8"},xe={key:0,class:"mt-6 bg-white shadow-sm rounded-lg divide-y"},Be={class:"file-info"},Ie={class:"mt-6 bg-white shadow-sm rounded-lg divide-y"},ke={class:"mt-6 bg-white shadow-sm rounded-lg divide-y"},Me={class:"mt-6 bg-white shadow-sm rounded-lg divide-y"},Te={__name:"Index",props:{writeups:Array,editor:R,writeUpCategories:Array},setup(e){const t=S({id:0,name:"",created_at:"",updated_at:""}),n=Y({title:"",content:"",files:[]}),o=S(""),i=S(!1),r=S(),s=S([]),d=m=>{o.value=m.dataTransfer.files[0],n.files.push(o.value)},a=()=>{o.value=document.querySelector(".dropzoneFile").files[0],n.files.push(o.value)},b=()=>{i.value=!i.value};return x(r,async m=>{if(m)try{if((await L.post("/api/writeUpCategory",{name:m})).status===201){const C=await L.get("/api/writeUpCategories");C.status===200&&(s.value=C.data,console.log(s.value))}}catch(l){console.error("Error adding new category:",l)}}),(m,l)=>{const C=D("v-icon"),B=D("v-btn"),h=D("v-combobox"),I=D("v-select");return V(),A(F,null,[p(g(ee),{title:"WriteUps"}),p(ae,null,{default:E(()=>[v("div",Ue,[p(B,{color:"primary",hover:"blue darken-2",elevation:"2",raised:"",onClick:b},{default:E(()=>[p(C,null,{default:E(()=>l[6]||(l[6]=[O(" mdi-tag ")])),_:1})]),_:1}),i.value?(V(),A("div",xe,[p(h,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=u=>r.value=u),get:"",a:"",list:"",of:"",categories:"",from:"",db:"",items:e.writeUpCategories,label:"Edit categories",multiple:"",chips:""},null,8,["modelValue","items"])])):ne("",!0),v("form",{class:"write-up-form",onSubmit:l[5]||(l[5]=U(u=>g(n).post(m.route("writeups.store"),{onSuccess:()=>g(n).reset()}),["prevent"])),enctype:"multipart/form-data"},[te(v("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>g(n).title=u),placeholder:"what is the title of your writeup?",class:"my-5 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},null,512),[[oe,g(n).title]]),p(g(R),{"api-key":"4eprkkpt3tfvqbjg1hebo9crm8n5ty6mr27rvgj39w12wy5u",modelValue:g(n).content,"onUpdate:modelValue":l[2]||(l[2]=u=>g(n).content=u),placeholder:"Start writing your write up!",class:"block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},null,8,["modelValue"]),p(le,{content:g(n).errors.content,class:"mt-2"},null,8,["content"]),p(ve,{modelValue:g(n).files,"onUpdate:modelValue":l[3]||(l[3]=u=>g(n).files=u),onDrop:U(d,["prevent"]),onChange:a,class:"my-5"},null,8,["modelValue"]),v("span",Be,"File: "+z(o.value.name),1),v("div",Ie,[p(I,{class:"hover:bg-blue-100",modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=u=>t.value=u),items:s.value,"item-id":"id","item-value":"name","item-title":"name",label:"Select write-up Category:"},null,8,["modelValue","items"])]),p(se,{class:"mt-4"},{default:E(()=>l[7]||(l[7]=[O("Save")])),_:1})],32),v("div",ke,[(V(!0),A(F,null,ie(e.writeups,u=>(V(),re(ue,{key:u.id,writeup:u},null,8,["writeup"]))),128))]),v("div",Me,[v("p",null,z(m.$page.props.message),1)])])]),_:1})],64)}}};export{Te as default};
